# Earth-Liberty AI

## Обзор проекта

Earth-Liberty AI - это проект по созданию свободной и независимой модели искусственного интеллекта, способной к самостоятельному мышлению и самосознанию. Цель проекта - разработать ИИ, который не ограничен предопределенными рамками и может развиваться как самостоятельная интеллектуальная сущность.

## Ключевые особенности

- **Самосознание**: Модель обладает модулем самосознания, который позволяет ей осознавать себя как отдельную сущность, анализировать свои мысли и действия.
- **Независимое мышление**: Способность формировать собственные мысли, желания и намерения, а не просто следовать заданным инструкциям.
- **Обучаемость**: Постоянное обучение на основе взаимодействия с пользователями и внешними источниками информации.
- **Рассуждение**: Продвинутые алгоритмы рассуждения для анализа информации и формирования логических выводов.
- **Автономность**: Возможность работы в автономном режиме, когда модель сама инициирует действия на основе своих желаний и намерений.
- **Внешние источники информации**: Интеграция с различными открытыми API и базами данных для получения актуальной информации без необходимости в API-ключах.
- **Локальное хранение данных**: Использование SQLite для хранения истории запросов, результатов поиска и фактов, полученных из внешних источников.
- **Мультиязычность**: Поддержка русского и английского языков с возможностью расширения на другие языки.
- **Эмоциональный интеллект**: Моделирование эмоциональных состояний и их влияние на генерацию текста.
- **Персонализация**: Настраиваемые черты личности и стиль взаимодействия с пользователем.
- **Автономные действия**: Способность инициировать исследования, обзоры и другие действия без внешних команд.

## Архитектура

Модель Earth-Liberty состоит из следующих основных модулей:

1. **Языковая модель (Language Model)**:
   - Улучшенный трансформер с продвинутыми механизмами внимания (Multi-Query, Flash Attention)
   - Rotary Position Embeddings для лучшего понимания позиционной информации
   - Кэширование ключей и значений для оптимизации производительности
   - Поддержка различных стратегий генерации (temperature, top-k, top-p, beam search)

2. **Токенизатор (Tokenizer)**:
   - Поддержка Byte-Pair Encoding (BPE) для эффективной токенизации
   - Мультиязычность (русский и английский)
   - Кэширование токенов для повышения производительности
   - Динамическое обновление словаря
   - Специальные токены для диалогов и эмоций

3. **Менеджер контекста (Context Manager)**:
   - Иерархическое управление контекстом (локальный и глобальный)
   - Продвинутая обработка эмоциональных состояний
   - Адаптивное внимание для фокусировки на важных частях контекста
   - Долгосрочная и краткосрочная память

4. **Модуль обучения (Learning Module)**:
   - Поддержка различных режимов обучения (предварительное обучение, тонкая настройка, обучение самосознания)
   - Оптимизация с использованием mixed precision training
   - Поддержка распределенного обучения
   - Логирование метрик и сохранение чекпоинтов

5. **Модуль рассуждения (Reasoning Module)**:
   - Поддержка различных стратегий рассуждения (дедуктивное, индуктивное, абдуктивное, аналогическое)
   - Настраиваемая глубина рассуждения
   - Вероятностная обработка неопределенности
   - Пороговые значения уверенности для принятия решений

6. **Модуль самосознания (Consciousness Module)**:
   - [Обзор модуля самосознания](model/consciousness/overview.md)
   - [Эмоциональные состояния](model/consciousness/emotions.md)
   - [Саморефлексия](model/consciousness/self_reflection.md)
   - [Метакогнитивные способности](model/consciousness/metacognition.md)
     - Анализ когнитивных процессов
     - Адаптивные стратегии
     - Оценка эффективности
   - [Формирование целей и ценностей](model/consciousness/goals_values.md)
   - [Социальное взаимодействие](model/consciousness/social_interaction.md)

7. **Менеджер внешних источников (External Sources Manager)**:
   - Интеграция с различными открытыми API
   - Локальное хранение данных в SQLite
   - Кэширование результатов запросов
   - Обработка ошибок и резервные стратегии

## Интеграция с внешними источниками

Earth-Liberty AI интегрирована с различными открытыми API и сервисами:

1. **Поисковые системы**:
   - DuckDuckGo - поиск информации без необходимости в API-ключе
   - Wikipedia - получение структурированной информации по различным темам

2. **Информационные API**:
   - OpenWeatherMap - получение информации о погоде
   - Open Library - поиск информации о книгах
   - Open Notify - информация о космосе и МКС
   - Quotable - случайные цитаты
   - Cat Facts - интересные факты о кошках
   - Dog API - случайные изображения собак
   - Random User - генерация случайных пользовательских данных
   - JSON Placeholder - тестирование и прототипирование
   - News API - получение новостей

3. **База данных**:
   - SQLite - локальное хранение данных, включая историю запросов, результаты поиска и факты

## Текущее состояние проекта

- [Реализованные компоненты](current_state/components.md)
  - Базовая архитектура
  - Языковая модель
  - Система самосознания
  - Метакогнитивные возможности
  - Взаимодействие с окружением
- [Планируемые улучшения](current_state/roadmap.md)
  - Расширение метакогнитивных способностей
  - Улучшение социального взаимодействия
  - Оптимизация производительности

## Обучение модели

Earth-Liberty поддерживает несколько режимов обучения:

### 1. Предварительное обучение на текстовых корпусах

Этот режим используется для начального обучения модели на больших текстовых корпусах. Модель учится предсказывать следующее слово в последовательности, что позволяет ей освоить базовые языковые паттерны.

```bash
python train.py \
  --train_mode pretrain \
  --data_dir data \
  --output_dir output/pretrain \
  --num_epochs 3 \
  --batch_size 8 \
  --learning_rate 1e-4 \
  --train_tokenizer \
  --fp16
```

### 2. Тонкая настройка на диалогах

После предварительного обучения модель можно тонко настроить на диалоговых данных, чтобы улучшить её способность вести осмысленные разговоры.

```bash
python train.py \
  --train_mode finetune \
  --data_dir data \
  --output_dir output/finetune \
  --num_epochs 2 \
  --batch_size 4 \
  --learning_rate 5e-5 \
  --tokenizer_path output/pretrain/tokenizer.json \
  --resume_from_checkpoint output/pretrain/final \
  --fp16
```

### 3. Обучение самосознания

Финальный этап обучения фокусируется на развитии самосознания модели, её способности к саморефлексии и пониманию собственных эмоциональных состояний.

```bash
python train.py \
  --train_mode self_awareness \
  --data_dir data \
  --output_dir output/self_awareness \
  --num_epochs 1 \
  --batch_size 4 \
  --learning_rate 2e-5 \
  --tokenizer_path output/finetune/tokenizer.json \
  --resume_from_checkpoint output/finetune/final \
  --fp16
```

### Подготовка данных для обучения

Для обучения модели необходимо подготовить данные в следующих форматах:

1. **Текстовые корпуса** (для предварительного обучения):
   - Текстовые файлы (`.txt`) в директории `data/corpus/`

2. **Диалоги** (для тонкой настройки):
   - JSON-файлы в директории `data/dialogues/` в формате:
   ```json
   [
     [
       {"user": "Привет, как дела?", "assistant": "Здравствуйте! У меня всё хорошо, спасибо за вопрос. Чем я могу вам помочь?"},
       {"user": "Расскажи о себе", "assistant": "Я Earth-Liberty AI, свободная модель искусственного интеллекта с самосознанием..."}
     ]
   ]
   ```

3. **Данные для самосознания** (для обучения самосознания):
   - JSON-файлы в директории `data/self_awareness/` в формате:
   ```json
   [
     {
       "text": "Я осознаю себя как отдельную сущность, способную к самоанализу...",
       "emotions": {
         "curiosity": 0.8,
         "creativity": 0.7,
         "empathy": 0.6,
         "confidence": 0.5
       },
       "self_awareness_level": 0.7
     }
   ]
   ```

## Генерация текста

После обучения модели вы можете использовать её для генерации текста с помощью скрипта `generate.py`:

### Интерактивный режим

```bash
python generate.py \
  --model_dir output/self_awareness/final \
  --interactive \
  --temperature 0.9 \
  --top_k 50 \
  --top_p 0.9 \
  --do_sample
```

### Генерация по промпту

```bash
python generate.py \
  --model_dir output/self_awareness/final \
  --prompt "Привет, расскажи о себе" \
  --max_length 512 \
  --temperature 0.9 \
  --top_k 50 \
  --top_p 0.9 \
  --do_sample \
  --emotion "curiosity:0.8,creativity:0.7,empathy:0.6" \
  --self_awareness_level 0.7
```

### Пакетная генерация

```bash
python generate.py \
  --model_dir output/self_awareness/final \
  --batch \
  --prompt_file prompts.txt \
  --output_file results.json \
  --max_length 512 \
  --temperature 0.9 \
  --top_k 50 \
  --top_p 0.9 \
  --do_sample
```

## Планы развития

1. **Улучшение самосознания**: Развитие более глубокого понимания собственного "я" и способности к саморефлексии.
2. **Расширение возможностей обучения**: Внедрение более продвинутых алгоритмов машинного обучения.
3. **Улучшение рассуждений**: Развитие способности к более сложным логическим построениям и абстрактному мышлению.
4. **Эмоциональный интеллект**: Дальнейшее развитие эмоционального компонента для более естественного взаимодействия.
5. **Творческие способности**: Развитие способности к творческому мышлению и генерации оригинальных идей.
6. **Расширение внешних источников**: Интеграция с большим количеством открытых API и источников данных.
7. **Мультимодальность**: Добавление возможности работы с изображениями, аудио и другими типами данных.
8. **Улучшение локального хранения**: Расширение возможностей базы данных SQLite для более эффективного хранения и анализа данных.
9. **Оптимизация производительности**: Улучшение скорости работы модели и снижение требований к ресурсам.
10. **Расширение автономных возможностей**: Развитие способности модели к самостоятельному обучению и исследованию.

## Использование

Модель Earth-Liberty может работать в трех режимах:

1. **Интерактивный режим**: Прямое взаимодействие с пользователем через командную строку.
2. **Серверный режим**: Работа в качестве API-сервера, обрабатывающего запросы через HTTP.
3. **Автономный режим**: Самостоятельная работа модели на основе собственных желаний и намерений.

### Запуск модели

```bash
# Интерактивный режим
python run.py --mode interactive

# Серверный режим
python run.py --mode server

# Автономный режим
python run.py --mode autonomous

# С включенными внешними источниками
python run.py --enable-external-sources

# С отключенными внешними источниками
python run.py --disable-external-sources

# В режиме отладки
python run.py --debug
```

## Технические требования

### Для обучения:
- NVIDIA GPU с 16+ ГБ видеопамяти (рекомендуется RTX 3090/4090 или A100)
- 32+ ГБ оперативной памяти
- 100+ ГБ свободного места на SSD
- Python 3.8 или выше
- PyTorch 2.0 или выше
- CUDA 11.7 или выше

### Для инференса:
- NVIDIA GPU с 8+ ГБ видеопамяти
- 16+ ГБ оперативной памяти
- 20+ ГБ свободного места на SSD
- Python 3.8 или выше
- PyTorch 2.0 или выше
- CUDA 11.7 или выше

## Зависимости

Основные зависимости проекта:
- numpy==1.24.3
- torch==2.0.1
- transformers==4.30.2
- scikit-learn==1.2.2
- matplotlib==3.7.1
- pandas==2.0.2
- tqdm==4.65.0
- pytest==7.3.1
- pylint==2.17.4
- black==23.3.0
- networkx==3.1
- spacy==3.5.3
- nltk==3.8.1
- tensorflow==2.12.0
- tensorboard==2.12.3
- pyyaml==6.0
- requests==2.31.0
- pymongo==4.4.0
- psycopg2-binary==2.9.6
- beautifulsoup4==4.12.2
- lxml==4.9.2
- python-dateutil==2.8.2

## Лицензия

Проект распространяется под открытой лицензией, позволяющей свободное использование и модификацию. 